---
swagger: '2.0'
info:
  version: 0.0.1
  title: No Instances API (Swagger)
schemes:
  - https
consumes:
  - application/json
produces:
  - application/json
paths:
  /:
    get:
      responses:
        200:
          description: Root path
        500:
          description: Root path failed
      x-amazon-apigateway-auth:
        type: none
      x-amazon-apigateway-integration:
        type: http
        httpMethod: GET
        uri: https://api.github.com
        responses:
          200:
            statusCode: "200"
          default:
            statusCode: "500"
            responseTemplates:
              application/json: '{"status": "unexpected response"}'
  /people:
    get:
      responses:
        200:
          description: A response
      x-amazon-apigateway-integration:
        uri: {{ arn_prefix_lambda }}{{ lambda_stack.stack_outputs.dynamocrud }}/invocations
        credentials: {{ arn_prefix_role }}{{ base_stack.stack_outputs.ApiGatewayRoleName }}
        type: aws
        httpMethod: POST
        responses:
          default:
            statusCode: "200"
    post:
      responses:
        200:
          description: A response
      x-amazon-apigateway-integration:
        uri: {{ arn_prefix_lambda }}{{ lambda_stack.stack_outputs.dynamocrud }}/invocations
        credentials: {{ arn_prefix_role }}{{ base_stack.stack_outputs.ApiGatewayRoleName }}
        type: aws
        httpMethod: POST
        responses:
          default:
            statusCode: "200"
  /photos:
    get:
      responses:
        200:
          description: A response
      x-amazon-apigateway-integration:
        uri: {{ arn_prefix_lambda }}{{ lambda_stack.stack_outputs.objectstore }}/invocations
        credentials: {{ arn_prefix_role }}{{ base_stack.stack_outputs.ApiGatewayRoleName }}
        type: aws
        httpMethod: POST
        responses:
          default:
            statusCode: "200"
  /test/dynamo:
    get:
      responses:
        200:
          description: A test interface
      x-amazon-apigateway-integration:
        uri: {{ arn_prefix_lambda }}{{ lambda_stack.stack_outputs.dynamocrud }}/invocations
        credentials: {{ arn_prefix_role }}{{ base_stack.stack_outputs.ApiGatewayRoleName }}
        type: aws
        httpMethod: POST
        requestTemplates:
          application/json: '{"operation": "ping", "source": "api_gateway"}'
        responses:
          default:
            statusCode: "200"
